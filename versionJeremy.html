<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AR Garden Viewer</title>
  <script type="module" src="https://unpkg.com/@google/model-viewer"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@400;700&display=swap" rel="stylesheet">
  <style>
      .navbar-custom {
          background-color: #40916c;
      }

      #descriptionTitle {
          font-size: 1.5rem; /* Adjust size */
          font-weight: bold;
      }

      .details-container {
          display: flex;
          justify-content: center; /* Center horizontally */
          align-items: center; /* Center vertically */
          flex-direction: column;
      }
      #viewer-container {
          flex: 1 1 auto;
          overflow: hidden;
      }
      model-viewer {
          width: 100%;
          height: 100%;
      }

      #fullscreen-button {
          position: absolute;
          bottom: 10px;
          left: 10px;
          background: rgba(0, 0, 0, 0.5);
          color: #fff;
          font-size: 1.25rem;
          padding: 0.5rem 0.75rem;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          transition: background 0.3s ease;
      }

      #fullscreen-button:hover {
          background: rgba(0, 0, 0, 0.7);
      }

      #plant-viewer {
          width: 300px;
          height: 300px;
          margin: 20px auto;
      }

      #qr-container {
          position: absolute;
          bottom: 130px;
          left: 50px;
          text-align: center;
          justify-content: center;
          align-items: center;
          display: none;
          flex: auto;
          flex-direction: column;
          gap: 10px;
      }

      #qr-container p1{
          font-size: 1rem;
          font-weight: bold;
          text-align: center;
          justify-content: center;
          background-color: #cfe8fc;
          padding: 10px 20px;
          border-radius: 8px;
          width: max-content;
      }

      #qr-container p2{
          font-size: 1rem;
          font-weight: bold;
          text-align: center;
          justify-content: center;
          background-color: #ff9997;
          padding: 10px 20px;
          border-radius: 8px;
          width: max-content;
      }

      .qr-code{
          max-width: 180px;
          max-height: 180px;
      }

      @media (min-width: 890px) {
          #qr-container {
              display: flex;
          }
          #landing h1 {
              font-size: 9rem;
          }

          #landing {
              padding: 100px;
          }

          #menu {
              gap: 15px;
          }
      }

      .landing {
          z-index: 2;
          position: absolute;
          width: 100vw;
          height: 100vh;
          overflow: hidden;
          background-color: #FFFFED;
          padding: 5px;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
      }

      .landing h1 {
          font-size: 3rem;
          color: #a1c6b5;
          font-family: "Exo 2", sans-serif;
          text-align: center;
          text-shadow: 3px 3px 5px rgba(0, 0, 0, 0.5);
      }

      .navbar-menu-btn,
      .back-btn,
      .custom-btn {
          background-color: #faeb8c; /* Soft pastel yellow */
          color: #5a5a5a;
          border: none;
          padding: 10px 20px;
          font-size: 16px;
          font-weight: bold;
          border-radius: 8px;
          cursor: pointer;
          transition: background-color 0.3s, transform 0.2s;
      }

      .navbar-menu-btn:hover,
      .back-btn:hover,
      .custom-btn:hover {
          background-color: #eddf47; /* Darker yellow on hover */
          transform: scale(1.05);
      }

      .menu {
          z-index: 1;
          position: absolute;
          width: 100vw;
          height: 100vh;
          overflow: hidden;
          background-color: #FFFFED;
          padding: 5px;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          gap: 5px;
      }

      #menu p {
          font-size: 1.5rem;
          font-family: "Exo 2", sans-serif;
          font-weight: bold;
          text-align: center;
          justify-content: center;
          padding: 10px 20px;
      }

      .model-btns {
          width: 180px; /* fixed width */
          height: 50px; /* fixed height for uniformity */
          padding: 10px; /* Ensures spacing inside the button */

          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;

          font-size: 1.2rem;
          font-weight: bold;
          color: #1b4332;

          background-color: #d8f3dc;
          border: 2px solid #40916c;
          border-radius: 8px; /* Rounded edges */

          transition: all 0.3s ease-in-out;
          cursor: pointer;

          margin: 10px; /* this is specific spacing between btns and is diff from gap */
      }

      .model-btns:hover {
          background-color: #b7e4c7; /* Lighter blue on hover */
          transform: scale(1.05); /* Slight pop effect */
      }

      .custom-ar-button {
          background-color: #40916c; /* Custom background */
          color: white;              /* Text color */
          padding: 12px 24px;        /* Button size */
          border: none;              /* Remove border */
          border-radius: 20px;       /* Rounded corners */
          font-size: 16px;
          font-weight: bold;
          cursor: pointer;
          position: absolute;
          bottom: 10px;              /* Position at the bottom */
          right: 10px;
          z-index: 0.5;               /* Ensure it's above other elements */
      }
  </style>

</head>
<body class="d-flex flex-column" style="height: 100vh;">

<div class="landing" id="landing">
  <h1> AR Model Viewer </h1>
  <model-viewer
    id="plant-viewer"
    shadow-intensity="1"
    auto-rotate
    src="https://static.wixstatic.com/3d/c183c2_fe5307996b3e492ea858704080e05d48.glb"
    max-camera-orbit= 'auto 100deg auto'>
  </model-viewer>

  <button class="custom-btn" onclick="dismissLanding()">View Here!</button>

  <div id="qr-container">
    <p1> Want to see how it looks in your yard? </p1>
    <p2> Scan Below: </p2>
    <img class="qr-code" src="https://static.wixstatic.com/media/47eab7_3512bc49286a4c99830494328d07beea~mv2.png" alt="QR Code">
  </div>
</div>

<div class="menu" id="menu">
  <p>Look At Our Different Garden Models: </p>
  <div class="buttons">
    <button class="model-btns" onclick="dismissMenu('MS')">Morning Sun</button>
    <button class="model-btns" onclick="dismissMenu('FS')">Full Sun</button>
    <button class="model-btns" onclick="dismissMenu('AS')">Afternoon Sun</button>
  </div>
  <button class="back-btn" onclick="displayLanding()">Back</button>
</div>

<nav class="navbar navbar-expand-lg navbar-dark navbar-custom">
  <div class="container-fluid">
    <button class="navbar-menu-btn" onclick="displayMenu()" >Menu</button>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarModelMenu"
            aria-controls="navbarModelMenu" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarModelMenu">
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
        <li class="nav-item mb-2 mb-lg-0 me-lg-1">
          <button class="btn btn-outline-light w-100 w-lg-auto" onclick="setModel('MS')">Morning Sun</button>
        </li>
        <li class="nav-item mb-2 mb-lg-0 me-lg-1">
          <button class="btn btn-outline-light w-100 w-lg-auto" onclick="setModel('FS')">Full Sun</button>
        </li>
        <li class="nav-item mb-2 mb-lg-0 me-lg-1">
          <button class="btn btn-outline-light w-100 w-lg-auto" onclick="setModel('AS')">Afternoon Sun</button>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="container mt-3 details-container">
  <div class="d-flex justify-content-center align-items-center">
    <h5 class="mb-0 text-center" id="descriptionTitle">Garden Details</h5>
    <button class="btn btn-link" data-bs-toggle="collapse" data-bs-target="#descriptionCollapse"
            aria-expanded="false" aria-controls="descriptionCollapse">
      <i class="bi bi-chevron-down"></i>
    </button>
  </div>
  <div class="collapse" id="descriptionCollapse">
    <div class="p-3 mb-2 bg-warning-subtle text-warning-emphasis">
      <p id="descriptionText">
        This will be filled with text describing the garden benefits and features.
      </p>
    </div>
  </div>
</div>

<div id="viewer-container" class="p-0">
  <model-viewer
    id="garden-viewer"
    ar
    ar-modes="scene-viewer webxr quick-look"
    camera-controls
    environment-image="neutral"
    shadow-intensity="1"
    auto-rotate
    camera-orbit="0deg 45deg auto"
    ar-scale="fixed"
    scale="0.5 0.5 0.5"
    max-camera-orbit= 'auto 90deg auto'>
    <button slot="ar-button" class="custom-ar-button">
      View In Your Space!
    </button>
  </model-viewer>

  <!-- Fullscreen button in corner -->
  <button id="fullscreen-button" title="Toggle Fullscreen">⛶</button>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  const fullscreenButton = document.getElementById('fullscreen-button');
  let currentInfo = 'FS';

  /* the following functions control the switching between different "pages"*/
  function dismissLanding() {
    const landing = document.getElementById('landing');
    landing.style.display = 'none';
  }

  function displayLanding() {
    document.getElementById('landing').style.display = 'flex';
  }

  function dismissMenu(model) {
    setModel(model);
    const menu = document.getElementById('menu');
    menu.style.display = 'none';
  }

  function displayMenu(){
    document.getElementById('menu').style.display = 'flex';
  }

  async function setModel(type) {
    const viewer = document.getElementById('garden-viewer');

    switch (type) {
      case 'AS':
        viewer.src = 'https://static.wixstatic.com/3d/c183c2_2530f1ea3ba14bd29971fb555cecce3e.glb';
        currentInfo = 'This Afternoon Sun Native Garden is designed to thrive in intense sunlight and dry conditions, featuring a diverse mix of drought-tolerant native Hawaiian plants that provide soil stabilization, habitat support, and seasonal interest. A foundation of Dianella sandwicensis (Ukiuki) and Carex wahuensis (Oʻahu sedge) creates dense, low-growing foliage. Osteomeles anthyllidifolia (Ulei) brings fragrant white flowers for pollinators, while Dodonaea viscosa (A‘ali‘i) contributes reddish seed capsules and height variation. A single Hibiscus arnottianus (Kokio Keokeo) serves as the garden’s focal point, with its fragrant white flowers.';
        break;
      case 'FS':
        viewer.src = 'https://static.wixstatic.com/3d/c183c2_0cb73f63fd1e48d69b71974a58eebb2c.glb';
        currentInfo = 'This Full Sun Native Garden features a resilient mix of native Hawaiian plants, chosen for their drought tolerance, biodiversity support, and cultural significance. A foundation of Dianella sandwicensis (Ukiuki) and Carex wahuensis (Oʻahu sedge) provides lush, low-growing foliage, while Osteomeles anthyllidifolia (Ulei) adds low ground cover and fragrant white flowers that bloom in the winter and spring. Dodonaea viscosa (A‘ali‘i) offers height and seasonal color, and a single Hibiscus arnottianus (Kokio Keokeo) serves as the garden’s focal point, with its fragrant white flowers and dark green foliage. Designed for minimal maintenance, this sustainable landscape enhances soil health, prevents erosion, and celebrates Hawaiʻi’s native flora.';
        break;
      case 'MS':
        viewer.src = 'https://static.wixstatic.com/3d/c183c2_df55cc504b704b2fb67229d6a60d48b9.glb';
        currentInfo = 'This Morning Sun Native Garden features a carefully selected mix of native Hawaiian plants, designed for partial sun conditions while promoting biodiversity, soil stability, and ecological resilience. A base of Dianella sandwicensis (Ukiuki) and Carex wahuensis (Oʻahu sedge) provides lush, low-growing foliage. Osteomeles anthyllidifolia (Ulei) introduces fragrant white flowers, supporting pollinators and contributing to seasonal variation, while Dodonaea viscosa (A‘ali‘i) adds height and reddish seed capsules, enhancing visual interest and reinforcing the garden’s drought resilience.';
        break;
      default:
        console.error('Unknown garden type:', type);
    }

    updateDescription();

    // Wait for the model to fully load
    await new Promise((resolve) => {
      viewer.addEventListener('load', resolve, { once: true });
    });
  }

  function updateDescription() {
    document.getElementById('descriptionText').textContent = currentInfo;
  }

  fullscreenButton.addEventListener('click', () => {
    if (!document.fullscreenElement) {
      document.documentElement.requestFullscreen();
    } else {
      document.exitFullscreen();
    }
  });
</script>
</body>